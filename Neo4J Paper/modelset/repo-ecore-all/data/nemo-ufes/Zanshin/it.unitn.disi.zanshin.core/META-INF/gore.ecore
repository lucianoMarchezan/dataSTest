<?xml version="1.0" encoding="UTF-8"?>
<ecore:EPackage xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:ecore="http://www.eclipse.org/emf/2002/Ecore" name="gore" nsURI="https://raw.githubusercontent.com/hbcesar/zanshin/master/it.unitn.disi.zanshin.core/META-INF/gore.ecore"
    nsPrefix="it.unitn.disi.zanshin.model">
  <eClassifiers xsi:type="ecore:EClass" name="GoalModel">
    <eOperations name="getId" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//ELongObject">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="if (internalId == null) internalId = System.currentTimeMillis();&#xA;return internalId;"/>
      </eAnnotations>
    </eOperations>
    <eOperations name="filterRelations" upperBound="-1" eType="#//DifferentialRelation">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="// Returns a list of relations associated with the given indicator.&#xA;EList&lt;DifferentialRelation> filteredRelations = new org.eclipse.emf.common.util.BasicEList&lt;>();&#xA;if (indicator != null)&#xA;&#x9;for (DifferentialRelation relation : relations) {&#xA;&#x9;&#x9;AwReq relationIndicator = relation.getIndicator(); &#xA;&#x9;&#x9;if ((relationIndicator != null) &amp;&amp; (relationIndicator.eClass().equals(indicator.eClass())))&#xA;&#x9;&#x9;&#x9;filteredRelations.add(relation);&#xA;&#x9;}&#xA;return filteredRelations;"/>
      </eAnnotations>
      <eParameters name="indicator" eType="#//AwReq"/>
    </eOperations>
    <eOperations name="filterRelations" upperBound="-1" eType="#//DifferentialRelation">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="// Returns a list of relations associated with the given parameter.&#xA;EList&lt;DifferentialRelation> filteredRelations = new org.eclipse.emf.common.util.BasicEList&lt;>();&#xA;if (parameter != null)&#xA;&#x9;for (DifferentialRelation relation : relations) {&#xA;&#x9;&#x9;Parameter relationParameter = relation.getParameter(); &#xA;&#x9;&#x9;if ((relationParameter != null) &amp;&amp; (relationParameter.eClass().equals(parameter.eClass())))&#xA;&#x9;&#x9;&#x9;filteredRelations.add(relation);&#xA;&#x9;}&#xA;return filteredRelations;"/>
      </eAnnotations>
      <eParameters name="parameter" eType="#//Parameter"/>
    </eOperations>
    <eOperations name="filterRelations" upperBound="-1" eType="#//DifferentialRelation">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="// Returns a list of relations associated with the given indicator and the given parameter.&#xA;EList&lt;DifferentialRelation> filteredRelations = new org.eclipse.emf.common.util.BasicEList&lt;>();&#xA;if ((indicator != null) &amp;&amp; (parameter != null))&#xA;&#x9;for (DifferentialRelation relation : relations) {&#xA;&#x9;&#x9;AwReq relationIndicator = relation.getIndicator();&#xA;&#x9;&#x9;Parameter relationParameter = relation.getParameter();&#xA;&#x9;&#x9;if ((relationIndicator != null) &amp;&amp; (relationIndicator.eClass().equals(indicator.eClass())) &amp;&amp; (relationParameter != null) &amp;&amp; (relationParameter.eClass().equals(parameter.eClass())))&#xA;&#x9;&#x9;&#x9;filteredRelations.add(relation);&#xA;&#x9;}&#xA;return filteredRelations;"/>
      </eAnnotations>
      <eParameters name="indicator" eType="#//AwReq"/>
      <eParameters name="parameter" eType="#//Parameter"/>
    </eOperations>
    <eOperations name="filterRelations" eType="#//DifferentialRelation">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="// Filters the relations by indicator and parameter.&#xA;EList&lt;DifferentialRelation> filteredRelations = filterRelations(indicator, parameter);&#xA;&#xA;// Creates a fake parameter for the value comparison.&#xA;it.unitn.disi.zanshin.model.gore.Parameter param = parameter.createCopy();&#xA;param.setValue(value);&#xA;&#xA;// Looks for a relation in which value is within bounds. Returns the first one found.&#xA;for (DifferentialRelation relation : filteredRelations) &#xA;&#x9;if (param.withinBoundsOf(relation))&#xA;&#x9;&#x9;return relation;&#xA;&#xA;// If not found, return null.&#xA;return null;"/>
      </eAnnotations>
      <eParameters name="indicator" eType="#//AwReq"/>
      <eParameters name="parameter" eType="#//Parameter"/>
      <eParameters name="value" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"/>
    </eOperations>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="internalId" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//ELongObject"
        changeable="false">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="suppressedGetVisibility" value="true"/>
      </eAnnotations>
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="suppressedSetVisibility" value="true"/>
      </eAnnotations>
    </eStructuralFeatures>
    <eStructuralFeatures xsi:type="ecore:EReference" name="actors" upperBound="-1"
        eType="#//Actor" containment="true" eOpposite="#//Actor/goalModel"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="rootGoal" eType="#//HardGoal"
        containment="true" eOpposite="#//HardGoal/goalModel"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="configuration" eType="#//Configuration"
        containment="true" eOpposite="#//Configuration/goalModel"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="relations" upperBound="-1"
        eType="#//DifferentialRelation" containment="true"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="GOREElement" eSuperTypes="LTL.ecore#//OclAny">
    <eOperations name="start">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="it.unitn.disi.zanshin.core.CoreUtils.log.debug(&quot;Requirement started: &quot; + eClass().getName() + &quot; (&quot; + this + &quot;)&quot;); //$NON-NLS-1$ //$NON-NLS-2$ //$NON-NLS-3$&#xD;&#xA;setState(it.unitn.disi.zanshin.model.gore.GOREElementState.STARTED);&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#xD;&#xA;// If the monitoring service is active, warn it that this requirement has been started.&#xD;&#xA;it.unitn.disi.zanshin.services.IMonitoringService monitoringService = it.unitn.disi.zanshin.core.Activator.getMonitoringService();&#xD;&#xA;if (monitoringService != null)&#xD;&#xA;&#x9;monitoringService.monitorMethodCall(this, it.unitn.disi.zanshin.model.gore.MonitorableMethod.START);&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#xD;&#xA;// Propagate the start to the parent.&#xD;&#xA;it.unitn.disi.zanshin.model.gore.GOREElement parent = getRefinementSource();&#xD;&#xA;if ((parent != null) &amp;&amp; (((GOREElement) parent).getState() == it.unitn.disi.zanshin.model.gore.GOREElementState.UNDEFINED))&#xD;&#xA;&#x9;((GOREElement) parent).start();"/>
      </eAnnotations>
    </eOperations>
    <eOperations name="end">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="it.unitn.disi.zanshin.core.CoreUtils.log.debug(&quot;Requirement ended: &quot; + eClass().getName() + &quot; (&quot; + this + &quot;)&quot;); //$NON-NLS-1$ //$NON-NLS-2$ //$NON-NLS-3$&#xD;&#xA;&#x9;&#x9;&#xD;&#xA;// If the monitoring service is active, warn it that this requirement has ended.&#xD;&#xA;it.unitn.disi.zanshin.services.IMonitoringService monitoringService = it.unitn.disi.zanshin.core.Activator.getMonitoringService();&#xD;&#xA;if (monitoringService != null)&#xD;&#xA;&#x9;monitoringService.monitorMethodCall(this, it.unitn.disi.zanshin.model.gore.MonitorableMethod.END);"/>
      </eAnnotations>
    </eOperations>
    <eOperations name="success">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="it.unitn.disi.zanshin.core.CoreUtils.log.debug(&quot;Requirement succeeded: &quot; + eClass().getName() + &quot; (&quot; + this + &quot;)&quot;); //$NON-NLS-1$ //$NON-NLS-2$ //$NON-NLS-3$&#xD;&#xA;setState(it.unitn.disi.zanshin.model.gore.GOREElementState.SUCCEEDED);&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#xD;&#xA;// If the monitoring service is active, warn it that this requirement has been successful.&#xD;&#xA;it.unitn.disi.zanshin.services.IMonitoringService monitoringService = it.unitn.disi.zanshin.core.Activator.getMonitoringService();&#xD;&#xA;if (monitoringService != null)&#xD;&#xA;&#x9;monitoringService.monitorMethodCall(this, it.unitn.disi.zanshin.model.gore.MonitorableMethod.SUCCESS);&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#xD;&#xA;// If the requirement is successful, then it has also ended.&#xD;&#xA;end();&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#xD;&#xA;// Propagate the success to the parent, depending on the type of refinement.&#xD;&#xA;it.unitn.disi.zanshin.model.gore.GOREElement parent = getRefinementSource();&#xD;&#xA;if ((parent != null) &amp;&amp; (parent instanceof it.unitn.disi.zanshin.model.gore.GoalOrientedRequirement)) {&#xD;&#xA;&#x9;it.unitn.disi.zanshin.model.gore.GoalOrientedRequirement p = (it.unitn.disi.zanshin.model.gore.GoalOrientedRequirement) parent;&#xD;&#xA;&#x9;if (p.getRefinementType() == it.unitn.disi.zanshin.model.gore.RefinementType.OR) ((GOREElement) parent).success();&#xD;&#xA;&#x9;else ((GOREElement)parent).checkState();&#xD;&#xA;}"/>
      </eAnnotations>
    </eOperations>
    <eOperations name="fail">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="it.unitn.disi.zanshin.core.CoreUtils.log.debug(&quot;Requirement failed: &quot; + eClass().getName() + &quot; (&quot; + this + &quot;)&quot;); //$NON-NLS-1$ //$NON-NLS-2$ //$NON-NLS-3$&#xD;&#xA;setState(it.unitn.disi.zanshin.model.gore.GOREElementState.FAILED);&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#xD;&#xA;// If the monitoring service is active, warn it that this requirement has failed.&#xD;&#xA;it.unitn.disi.zanshin.services.IMonitoringService monitoringService = it.unitn.disi.zanshin.core.Activator.getMonitoringService();&#xD;&#xA;if (monitoringService != null)&#xD;&#xA;&#x9;monitoringService.monitorMethodCall(this, it.unitn.disi.zanshin.model.gore.MonitorableMethod.FAIL);&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#xD;&#xA;// If the requirement failed, then it has also ended.&#xD;&#xA;end();&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#xD;&#xA;// Propagate the failure to the parent, depending on the type of refinement.&#xD;&#xA;it.unitn.disi.zanshin.model.gore.GOREElement parent = getRefinementSource();&#xD;&#xA;if ((parent != null) &amp;&amp; (parent instanceof it.unitn.disi.zanshin.model.gore.GoalOrientedRequirement)) {&#xD;&#xA;&#x9;it.unitn.disi.zanshin.model.gore.GoalOrientedRequirement p = (it.unitn.disi.zanshin.model.gore.GoalOrientedRequirement) parent;&#xD;&#xA;&#x9;if (p.getRefinementType() == it.unitn.disi.zanshin.model.gore.RefinementType.AND) ((GOREElement) parent).fail();&#xD;&#xA;&#x9;else ((GOREElement)parent).checkState();&#xD;&#xA;}"/>
      </eAnnotations>
    </eOperations>
    <eOperations name="checkState">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="// Counts the number of children in each state and the number of definable children.&#xA;org.eclipse.emf.common.util.EList&lt;Integer> stateCount = getChildrenStateCount();&#xA;int defChildrenCount = stateCount.get(stateCount.size() - 1);&#xA;&#x9;&#x9;&#x9;&#x9;&#xA;// For AND-refined requirements, checks if all children have SUCCEEDED.&#xA;if (this instanceof it.unitn.disi.zanshin.model.gore.GoalOrientedRequirement) {&#xA;&#x9;it.unitn.disi.zanshin.model.gore.GoalOrientedRequirement p = (it.unitn.disi.zanshin.model.gore.GoalOrientedRequirement) this;&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;if(p.getRefinementType() == it.unitn.disi.zanshin.model.gore.RefinementType.AND) {&#xA;&#x9;&#x9;if (stateCount.get(it.unitn.disi.zanshin.model.gore.GOREElementState.SUCCEEDED_VALUE) == defChildrenCount) success();&#xA;&#x9;}&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;// For OR-refined requirements, checks if all children have FAILED.&#xA;&#x9;else {&#xA;&#x9;&#x9;if (stateCount.get(it.unitn.disi.zanshin.model.gore.GOREElementState.FAILED_VALUE) == defChildrenCount) fail();&#xA;&#x9;}&#xA;} "/>
      </eAnnotations>
    </eOperations>
    <eOperations name="replaceWith">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="// Cannot replace a requirement instance with null.&#xD;&#xA;if (newRequirement == null) {&#xD;&#xA;&#x9;it.unitn.disi.zanshin.core.CoreUtils.log.error(&quot;Cannot replace a requirement instance with null. A proper requirement instance should be provided.&quot;); //$NON-NLS-1$&#xD;&#xA;&#x9;&#x9;&#x9;throw new IllegalArgumentException();&#xD;&#xA;}&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#xD;&#xA;// Can only replace requirements of the same class.&#xD;&#xA;if (! newRequirement.eClass().equals(eClass())) {&#xD;&#xA;&#x9;it.unitn.disi.zanshin.core.CoreUtils.log.error(&quot;Cannot replace a requirement instance of class {0} with one of class {1}. Instances should be of the same class.&quot;, eClass().getName(), newRequirement.eClass().getName());//$NON-NLS-1$&#xD;&#xA;&#x9;throw new IllegalArgumentException();&#xD;&#xA;}&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#xD;&#xA;// Changes the parent-child relationship (if there's no parent, we're setting null over null, so no harm). When&#xD;&#xA;// elements have many-to-one bilateral associations, only the &quot;one&quot; side is manipulated. This is on purpose, as EMF&#xD;&#xA;// generated code will handle the inverse association automatically.&#xD;&#xA;GOREElement parent = getRefinementSource();&#xD;&#xA;setRefinementSource(null);&#xD;&#xA;newRequirement.setRefinementSource(parent);&#xD;&#xA;it.unitn.disi.zanshin.core.CoreUtils.log.debug(&quot;Replacing requirement instances of class {0} ({1} -> {2})&quot;, eClass().getName(), this, newRequirement); //$NON-NLS-1$&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#xD;&#xA;// After a piece of the requirements tree gets replaced by new instances (with possible different states), check if&#xD;&#xA;// the ancestors should also have their state reset. For instance, if a failed instance is replaced by a non-failing&#xD;&#xA;// one in an AND-refinement, the parent should change from Failed to Started or Undefined. Navigate up the tree.&#xD;&#xA;while (parent != null) {&#xD;&#xA;&#x9;// This procedure only makes sense in Goal Oriented Requirements.&#xD;&#xA;&#x9;if(parent instanceof it.unitn.disi.zanshin.model.gore.GoalOrientedRequirement){&#xD;&#xA;&#x9;&#x9;it.unitn.disi.zanshin.model.gore.GoalOrientedRequirement req = (it.unitn.disi.zanshin.model.gore.GoalOrientedRequirement) parent;&#xD;&#xA;&#x9;&#x9;&#xD;&#xA;&#x9;&#x9;// Counts the number of children in each state and the number of definable children.&#xD;&#xA;&#x9;&#x9;EList&lt;Integer> stateCount = req.getChildrenStateCount();&#xD;&#xA;&#x9;&#x9;//int defChildrenCount = stateCount.get(stateCount.size() - 1);&#xD;&#xA;&#x9;&#x9;int defChildrenCount = getChildren().size();&#xD;&#xA;&#x9;&#x9;boolean doReset = false;&#xD;&#xA;&#x9;&#x9;&#xD;&#xA;&#x9;&#x9;// Checks the type of the requirement.&#xD;&#xA;&#x9;&#x9;switch (req.getRefinementType()) {&#xD;&#xA;&#x9;&#x9;case AND:&#xD;&#xA;&#x9;&#x9;&#x9;// For failed AND-refined requirements, if none of its children failed, reset its state.&#xD;&#xA;&#x9;&#x9;&#x9;doReset = (req.getState() == it.unitn.disi.zanshin.model.gore.GOREElementState.FAILED) &amp;&amp; (stateCount.get(it.unitn.disi.zanshin.model.gore.GOREElementState.FAILED_VALUE) == 0);&#xD;&#xA;&#x9;&#x9;&#x9;break;&#xD;&#xA;&#x9;&#x9;case OR:&#xD;&#xA;&#x9;&#x9;&#x9;// For failed OR-refined requirements, if at least one of its children didn't fail, reset its state.&#xD;&#xA;&#x9;&#x9;&#x9;doReset = (req.getState() == it.unitn.disi.zanshin.model.gore.GOREElementState.FAILED) &amp;&amp; (stateCount.get(it.unitn.disi.zanshin.model.gore.GOREElementState.FAILED_VALUE) &lt; defChildrenCount);&#xD;&#xA;&#x9;&#x9;&#x9;break;&#xD;&#xA;&#x9;&#x9;}&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#xD;&#xA;&#x9;&#x9;// Checks if a reset is in order.&#xD;&#xA;&#x9;&#x9;if (doReset) {&#xD;&#xA;&#x9;&#x9;&#x9;// If no children have yet started, set the requirement also as Undefined.&#xD;&#xA;&#x9;&#x9;&#x9;if (stateCount.get(it.unitn.disi.zanshin.model.gore.GOREElementState.UNDEFINED_VALUE) == defChildrenCount)&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;req.setState(it.unitn.disi.zanshin.model.gore.GOREElementState.UNDEFINED);&#xD;&#xA;&#x9;&#x9;&#xD;&#xA;&#x9;&#x9;&#x9;// Otherwise, if at least one child has started, set it also as Started.&#xD;&#xA;&#x9;&#x9;&#x9;else req.setState(it.unitn.disi.zanshin.model.gore.GOREElementState.STARTED);&#xD;&#xA;&#x9;&#x9;&#xD;&#xA;&#x9;&#x9;&#x9;// Log what has just happened.&#xD;&#xA;&#x9;&#x9;&#x9;it.unitn.disi.zanshin.core.CoreUtils.log.debug(&quot;The status of {0} has been reset to {1}&quot;, req.eClass().getName(), req.getState()); //$NON-NLS-1$&#xD;&#xA;&#x9;&#x9;}&#xD;&#xA;&#x9;&#x9;&#x9;&#xD;&#xA;&#x9;} &#xD;&#xA;&#x9;&#xD;&#xA;&#x9;// Next ancestor.&#xD;&#xA;&#x9;parent = parent.getRefinementSource();&#xD;&#xA;}"/>
      </eAnnotations>
      <eParameters name="newRequirement" eType="#//GOREElement"/>
    </eOperations>
    <eOperations name="findGoalModel" eType="#//GoalModel">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="GoalModel model = null;&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#xD;&#xA;// If it's the root goal, return the goal model.&#xD;&#xA;if (this instanceof it.unitn.disi.zanshin.model.gore.HardGoal)&#xD;&#xA;&#x9;&#x9;&#x9;model = ((it.unitn.disi.zanshin.model.gore.HardGoal) this).getGoalModel();&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#xD;&#xA;// If the model is not found in the root goal, move up the requirement tree looking for the root goal.&#xD;&#xA;if ((model == null) &amp;&amp; (getRefinementSource() != null))&#xD;&#xA;&#x9;&#x9;&#x9;model = getRefinementSource().findGoalModel();&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#xD;&#xA;// Returns the found model, or null if no model has been found.&#xD;&#xA;return model;"/>
      </eAnnotations>
    </eOperations>
    <eOperations name="getChildren">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="EList&lt;GOREElement> children = new org.eclipse.emf.common.util.BasicEList&lt;>();&#xD;&#xA;EList&lt;AwReq> awreqs = this.getAwreqs();&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#xD;&#xA;for(GOREElement child : awreqs){&#xD;&#xA;&#x9;children.add(child);&#xD;&#xA;}&#xD;&#xA;&#x9;&#x9;&#xD;&#xA;return children;"/>
      </eAnnotations>
      <eGenericType eClassifier="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EEList">
        <eTypeArguments eClassifier="#//GOREElement"/>
      </eGenericType>
    </eOperations>
    <eOperations name="getChildrenStateCount" upperBound="-1" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EInt">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="// Counts the number of children in each state and the number of children.&#xD;&#xA;int[] stateCount = new int[it.unitn.disi.zanshin.model.gore.GOREElementState.VALUES.size()];&#xD;&#xA; &#xD;&#xA;for (it.unitn.disi.zanshin.model.gore.GOREElement child : getChildren()) {&#xD;&#xA;&#x9;stateCount[((GOREElement) child).getState().getValue()]++;&#xD;&#xA;}&#xD;&#xA;&#xD;&#xA;// Converts to EList so we can return&#xD;&#xA;EList&lt;Integer> stateCountList = new org.eclipse.emf.common.util.BasicEList&lt;>();&#xD;&#xA;for (int count : stateCount)&#xD;&#xA;&#x9;stateCountList.add(count);&#xD;&#xA;&#xD;&#xA;return stateCountList;"/>
      </eAnnotations>
    </eOperations>
    <eOperations name="getRefinementSource" eType="#//GOREElement">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="if(this instanceof it.unitn.disi.zanshin.model.gore.GoalOrientedRequirement) {&#xD;&#xA;&#x9;it.unitn.disi.zanshin.model.gore.GoalOrientedRequirement g = (it.unitn.disi.zanshin.model.gore.GoalOrientedRequirement) this;&#xD;&#xA;&#x9;return g.getParent();&#xD;&#xA;} else if (this instanceof it.unitn.disi.zanshin.model.gore.AwReq) {&#xD;&#xA;&#x9;it.unitn.disi.zanshin.model.gore.AwReq ar = (it.unitn.disi.zanshin.model.gore.AwReq) this;&#xD;&#xA;&#x9;return ar.getTarget();&#xD;&#xA;} else if (this instanceof it.unitn.disi.zanshin.model.gore.QualityConstraint) {&#xD;&#xA;&#x9;it.unitn.disi.zanshin.model.gore.QualityConstraint qc = (it.unitn.disi.zanshin.model.gore.QualityConstraint) this;&#xD;&#xA;&#x9;return qc.getTarget();&#xD;&#xA;}&#xD;&#xA;&#x9;&#x9;&#xD;&#xA;return null;"/>
      </eAnnotations>
    </eOperations>
    <eOperations name="setRefinementSource">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="if(this instanceof it.unitn.disi.zanshin.model.gore.GoalOrientedRequirement) {&#xA;&#x9;it.unitn.disi.zanshin.model.gore.GoalOrientedRequirement g = (it.unitn.disi.zanshin.model.gore.GoalOrientedRequirement) this;&#xA;&#x9;g.setParent((it.unitn.disi.zanshin.model.gore.GoalOrientedRequirement) parent);&#xA;} else if (this instanceof it.unitn.disi.zanshin.model.gore.AwReq) {&#xA;&#x9;it.unitn.disi.zanshin.model.gore.AwReq ar = (it.unitn.disi.zanshin.model.gore.AwReq) this;&#xA;&#x9;ar.setTarget(parent);&#xA;} else if (this instanceof it.unitn.disi.zanshin.model.gore.QualityConstraint) {&#xA;&#x9;it.unitn.disi.zanshin.model.gore.QualityConstraint qc = (it.unitn.disi.zanshin.model.gore.QualityConstraint) this;&#xA;&#x9;qc.setTarget((it.unitn.disi.zanshin.model.gore.Softgoal) parent);&#xA;}"/>
      </eAnnotations>
      <eParameters name="parent" eType="#//GOREElement"/>
    </eOperations>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="time" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDate"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="state" eType="#//GOREElementState"
        defaultValueLiteral="undefined"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="awreqs" upperBound="-1"
        eType="#//AwReq" containment="true" eOpposite="#//AwReq/target"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="internalID" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EIntegerObject"
        defaultValueLiteral="0" iD="true"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="GoalOrientedRequirement" eSuperTypes="#//GOREElement">
    <eOperations name="getChildren">
      <eGenericType eClassifier="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EEList">
        <eTypeArguments eClassifier="#//GOREElement"/>
      </eGenericType>
    </eOperations>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="refinementType" eType="#//RefinementType"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="assumptions" upperBound="-1"
        eType="#//DomainAssumption" containment="true" eOpposite="#//DomainAssumption/parent"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="parent" eType="#//GoalOrientedRequirement"
        eOpposite="#//GoalOrientedRequirement/refinements"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="refinements" upperBound="-1"
        eType="#//GoalOrientedRequirement" containment="true" eOpposite="#//GoalOrientedRequirement/parent"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="PerformativeRequirement" eSuperTypes="#//GoalOrientedRequirement">
    <eOperations name="cancel">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="// Only process the cancellation if the requirement has not yet been canceled.&#xD;&#xA;if (getState() != it.unitn.disi.zanshin.model.gore.GOREElementState.CANCELED) {&#xD;&#xA;&#x9;it.unitn.disi.zanshin.core.CoreUtils.log.debug(&quot;Requirement canceled: &quot; + eClass().getName() + &quot; (&quot; + this + &quot;)&quot;); //$NON-NLS-1$ //$NON-NLS-2$ //$NON-NLS-3$&#xD;&#xA;&#x9;setState(it.unitn.disi.zanshin.model.gore.GOREElementState.CANCELED);&#xD;&#xA;&#x9;&#x9;&#x9;&#xD;&#xA;&#x9;// If the monitoring service is active, warn it that this requirement has been canceled.&#xD;&#xA;&#x9;it.unitn.disi.zanshin.services.IMonitoringService monitoringService = it.unitn.disi.zanshin.core.Activator.getMonitoringService();&#xD;&#xA;&#x9;if (monitoringService != null)&#xD;&#xA;&#x9;&#x9;monitoringService.monitorMethodCall(this, it.unitn.disi.zanshin.model.gore.MonitorableMethod.CANCEL);&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;// If the requirement is canceled, then it has also ended.&#xD;&#xA;&#x9;end();&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;// Propagate the cancellation to the parent, depending if its definable/performative, and/or-refined.&#xD;&#xA;&#x9;//TODO: verificar propagacao pra outros tipos de requisito&#xD;&#xA;&#x9;it.unitn.disi.zanshin.model.gore.GOREElement parent = getParent();&#xD;&#xA;&#x9;if ((parent != null) &amp;&amp; (parent instanceof it.unitn.disi.zanshin.model.gore.GoalOrientedRequirement)) {&#xD;&#xA;&#x9;&#x9;it.unitn.disi.zanshin.model.gore.GoalOrientedRequirement req = (it.unitn.disi.zanshin.model.gore.GoalOrientedRequirement) parent;&#xD;&#xA;&#x9;&#x9;if (req.getRefinementType() == it.unitn.disi.zanshin.model.gore.RefinementType.OR) parent.checkState();&#xD;&#xA;&#x9;&#x9;else if (parent instanceof PerformativeRequirement) ((PerformativeRequirement) parent).cancel();&#xD;&#xA;&#x9;&#x9;else parent.fail();&#xD;&#xA;&#x9;}&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;// Also propagate the cancellation to the children if and-refined and the children are performative.&#xD;&#xA;&#x9;if (getRefinementType() == it.unitn.disi.zanshin.model.gore.RefinementType.AND)&#xD;&#xA;&#x9;&#x9;for (it.unitn.disi.zanshin.model.gore.GOREElement child : getChildren())&#xD;&#xA;&#x9;&#x9;&#x9;if (child instanceof PerformativeRequirement) ((PerformativeRequirement) child).cancel();&#xD;&#xA;}"/>
      </eAnnotations>
    </eOperations>
    <eOperations name="checkState">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="//Counts the number of children&#xD;&#xA;org.eclipse.emf.common.util.EList&lt;Integer> stateCount = getChildrenStateCount();&#xD;&#xA;int childrenCount = getChildren().size();&#xD;&#xA;&#xD;&#xA;// For AND-refined requirements, checks if all children have SUCCEEDED.&#xD;&#xA;if (getRefinementType() == it.unitn.disi.zanshin.model.gore.RefinementType.AND) {&#xD;&#xA;&#x9;if (stateCount.get(it.unitn.disi.zanshin.model.gore.GOREElementState.SUCCEEDED_VALUE) == childrenCount) success();&#xD;&#xA;}&#xD;&#xA;&#xD;&#xA;// For OR-refined requirements, checks if all children have FAILED or have been CANCELED.&#xD;&#xA;else {&#xD;&#xA;&#x9;if (stateCount.get(it.unitn.disi.zanshin.model.gore.GOREElementState.FAILED_VALUE) == childrenCount) fail();&#xD;&#xA;&#x9;else if (stateCount.get(it.unitn.disi.zanshin.model.gore.GOREElementState.CANCELED_VALUE) == childrenCount) cancel();&#xD;&#xA;}"/>
      </eAnnotations>
    </eOperations>
    <eOperations name="getChildren">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="EList&lt;GOREElement> children = new org.eclipse.emf.common.util.BasicEList&lt;>();&#xD;&#xA;EList&lt;GOREElement> awreqs_da = (EList&lt;GOREElement>) super.getChildren();&#xD;&#xA;EList&lt;it.unitn.disi.zanshin.model.gore.GoalOrientedRequirement> goals_tasks = getRefinements();&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#xD;&#xA;for(GOREElement child : awreqs_da){&#xD;&#xA;&#x9;children.add(child);&#xD;&#xA;}&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#xD;&#xA;for(GOREElement child : goals_tasks){&#xD;&#xA;&#x9;children.add(child);&#xD;&#xA;}&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#xD;&#xA;return children;"/>
      </eAnnotations>
      <eGenericType eClassifier="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EEList">
        <eTypeArguments eClassifier="#//GOREElement"/>
      </eGenericType>
    </eOperations>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="startTime" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDate"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="HardGoal" eSuperTypes="#//PerformativeRequirement">
    <eStructuralFeatures xsi:type="ecore:EReference" name="goalModel" eType="#//GoalModel"
        eOpposite="#//GoalModel/rootGoal"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="Softgoal" eSuperTypes="#//GoalOrientedRequirement">
    <eOperations name="getChildren">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="EList&lt;GOREElement> children = new org.eclipse.emf.common.util.BasicEList&lt;>();&#xD;&#xA;EList&lt;GOREElement> awreqs_da = (EList&lt;GOREElement>) super.getChildren();&#xD;&#xA;EList&lt;QualityConstraint> qc = this.getConstraints();&#xD;&#xA;EList&lt;it.unitn.disi.zanshin.model.gore.GoalOrientedRequirement> goals = getRefinements();&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#xD;&#xA;for(GOREElement child : awreqs_da){&#xD;&#xA;&#x9;children.add(child);&#xD;&#xA;}&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#xD;&#xA;for(GOREElement child : qc){&#xD;&#xA;&#x9;children.add(child);&#xD;&#xA;}&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#xD;&#xA;for(it.unitn.disi.zanshin.model.gore.GoalOrientedRequirement child : goals){&#xD;&#xA;&#x9;children.add((GOREElement) child);&#xD;&#xA;}&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#xD;&#xA;return children;"/>
      </eAnnotations>
      <eGenericType eClassifier="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EEList">
        <eTypeArguments eClassifier="#//GOREElement"/>
      </eGenericType>
    </eOperations>
    <eStructuralFeatures xsi:type="ecore:EReference" name="constraints" upperBound="-1"
        eType="#//QualityConstraint" containment="true" eOpposite="#//QualityConstraint/target"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="QualityConstraint" eSuperTypes="#//GOREElement">
    <eOperations name="replaceWith">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="// Performs the replacement as a normal requirement first.&#xD;&#xA;super.replaceWith(newRequirement);&#xD;&#xA;&#x9;&#x9;&#xD;&#xA;// Then, replace the relationship quality constraints have with softgoals.&#xD;&#xA;it.unitn.disi.zanshin.model.gore.Softgoal softgoal = (it.unitn.disi.zanshin.model.gore.Softgoal) getRefinementSource();&#xD;&#xA;setRefinementSource(null);&#xD;&#xA;((QualityConstraint) newRequirement).setRefinementSource(softgoal);"/>
      </eAnnotations>
      <eParameters name="newRequirement" eType="#//GoalOrientedRequirement"/>
    </eOperations>
    <eStructuralFeatures xsi:type="ecore:EReference" name="target" eType="#//Softgoal"
        eOpposite="#//Softgoal/constraints"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="AwReq" eSuperTypes="#//GOREElement">
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="incrementCoefficient" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDouble"
        defaultValueLiteral="1.0"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="target" eType="#//GOREElement"
        eOpposite="#//GOREElement/awreqs"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="DomainAssumption" eSuperTypes="#//GOREElement">
    <eStructuralFeatures xsi:type="ecore:EReference" name="parent" lowerBound="1"
        eType="#//GoalOrientedRequirement" eOpposite="#//GoalOrientedRequirement/assumptions"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="Task" eSuperTypes="#//PerformativeRequirement"/>
  <eClassifiers xsi:type="ecore:EEnum" name="AggregationLevel">
    <eLiterals name="INSTANCE" literal="instance-level"/>
    <eLiterals name="CLASS" value="1" literal="class-level"/>
    <eLiterals name="BOTH" value="2" literal="both-levels"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EEnum" name="GOREElementState">
    <eLiterals name="UNDEFINED" literal="undefined"/>
    <eLiterals name="STARTED" value="1" literal="started"/>
    <eLiterals name="SUCCEEDED" value="2" literal="succeeded"/>
    <eLiterals name="FAILED" value="3" literal="failed"/>
    <eLiterals name="CANCELED" value="4" literal="canceled"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EEnum" name="DifferentialRelationOperator">
    <eLiterals name="GREATER_THAN" literal="gt"/>
    <eLiterals name="FEWER_THAN" literal="ft"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EEnum" name="MonitorableMethod">
    <eLiterals name="START" literal="start"/>
    <eLiterals name="END" value="1" literal="end"/>
    <eLiterals name="SUCCESS" value="2" literal="success"/>
    <eLiterals name="FAIL" value="3" literal="fail"/>
    <eLiterals name="CANCEL" value="4" literal="cancel"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EEnum" name="ParameterMetric">
    <eLiterals name="ENUMERATED" literal="enumerated"/>
    <eLiterals name="INTEGER" value="1" literal="integer"/>
    <eLiterals name="REAL" value="2" literal="real"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EEnum" name="ParameterType">
    <eLiterals name="VARIATION_POINT" literal="vp"/>
    <eLiterals name="ENUMERATED_CONTROL_VARIABLE" value="1" literal="ecv"/>
    <eLiterals name="NUMERIC_CONTROL_VARIABLE" value="2" literal="ncv"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EEnum" name="RefinementType">
    <eLiterals name="AND" literal="and"/>
    <eLiterals name="OR" value="1" literal="or"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="Actor">
    <eStructuralFeatures xsi:type="ecore:EReference" name="goalModel" eType="#//GoalModel"
        eOpposite="#//GoalModel/actors"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="internalID" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EIntegerObject"
        defaultValueLiteral="0" iD="true"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="Configuration">
    <eStructuralFeatures xsi:type="ecore:EReference" name="parameters" upperBound="-1"
        eType="#//Parameter" containment="true" eOpposite="#//Parameter/configuration"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="goalModel" eType="#//GoalModel"
        eOpposite="#//GoalModel/configuration"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="internalID" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EIntegerObject"
        defaultValueLiteral="0" iD="true"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="DifferentialRelation">
    <eStructuralFeatures xsi:type="ecore:EReference" name="indicator" eType="#//AwReq"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="parameter" eType="#//Parameter"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="lowerBound" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="upperBound" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="operator" eType="#//DifferentialRelationOperator"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="value" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDouble"
        defaultValueLiteral="0.0"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="internalID" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EIntegerObject"
        defaultValueLiteral="0" iD="true"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="Parameter">
    <eOperations name="greaterThan" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EBooleanObject">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="Boolean result = null;&#xA;&#xA;// Checks the metric of the parameter to know how to compare.&#xA;try {&#xA;&#x9;switch (metric) {&#xA;&#x9;// FIXME: implement enumerated parameters.&#xA;&#x9;case ENUMERATED:&#xA;&#x9;&#x9;break;&#xA;&#x9;&#x9;&#xA;&#x9;// If the parameter is numeric, parses it and compare as numbers.&#xA;&#x9;case INTEGER:&#xA;&#x9;case REAL:&#xA;&#x9;&#x9;java.math.BigDecimal a = new java.math.BigDecimal(this.value);&#xA;&#x9;&#x9;java.math.BigDecimal b = new java.math.BigDecimal(value);&#xA;&#x9;&#x9;return a.compareTo(b) > 0;&#xA;&#x9;}&#xA;}&#xA;&#xA;// In case there are parsing errors (badly formatted numbers in the model), logs an error and returns null.&#xA;catch (NumberFormatException e) {&#xA;&#x9;it.unitn.disi.zanshin.core.CoreUtils.log.error(&quot;Error during string->number conversion, either the parameter value ({0}) or the value to compare ({1}) are not numbers.&quot;, e, this.value, value); //$NON-NLS-1$&#xA;}&#xA;&#xA;return result;"/>
      </eAnnotations>
      <eParameters name="value" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"/>
    </eOperations>
    <eOperations name="fewerThan" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EBooleanObject">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="Boolean result = null;&#xA;&#xA;// Checks the metric of the parameter to know how to compare.&#xA;try {&#xA;&#x9;switch (metric) {&#xA;&#x9;// FIXME: implement enumerated parameters.&#xA;&#x9;case ENUMERATED:&#xA;&#x9;&#x9;break;&#xA;&#x9;&#x9;&#xA;&#x9;// If the parameter is numeric, parses it and compare as numbers.&#xA;&#x9;case INTEGER:&#xA;&#x9;case REAL:&#xA;&#x9;&#x9;java.math.BigDecimal a = new java.math.BigDecimal(this.value);&#xA;&#x9;&#x9;java.math.BigDecimal b = new java.math.BigDecimal(value);&#xA;&#x9;&#x9;return a.compareTo(b) &lt; 0;&#xA;&#x9;}&#xA;}&#xA;&#xA;// In case there are parsing errors (badly formatted numbers in the model), logs an error and returns null.&#xA;catch (NumberFormatException e) {&#xA;&#x9;it.unitn.disi.zanshin.core.CoreUtils.log.error(&quot;Error during string->number conversion, either the parameter value ({0}) or the value to compare ({1}) are not numbers.&quot;, e, this.value, value); //$NON-NLS-1$&#xA;}&#xA;&#xA;return result;"/>
      </eAnnotations>
      <eParameters name="value" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"/>
    </eOperations>
    <eOperations name="equalTo" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EBooleanObject">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="Boolean result = null;&#xA;&#xA;// Checks the metric of the parameter to know how to compare.&#xA;try {&#xA;&#x9;switch (metric) {&#xA;&#x9;// FIXME: implement enumerated parameters.&#xA;&#x9;case ENUMERATED:&#xA;&#x9;&#x9;break;&#xA;&#x9;&#x9;&#xA;&#x9;// If the parameter is numeric, parses it and compare as numbers.&#xA;&#x9;case INTEGER:&#xA;&#x9;case REAL:&#xA;&#x9;&#x9;java.math.BigDecimal a = new java.math.BigDecimal(this.value);&#xA;&#x9;&#x9;java.math.BigDecimal b = new java.math.BigDecimal(value);&#xA;&#x9;&#x9;return a.compareTo(b) == 0;&#xA;&#x9;}&#xA;}&#xA;&#xA;// In case there are parsing errors (badly formatted numbers in the model), logs an error and returns null.&#xA;catch (NumberFormatException e) {&#xA;&#x9;it.unitn.disi.zanshin.core.CoreUtils.log.error(&quot;Error during string->number conversion, either the parameter value ({0}) or the value to compare ({1}) are not numbers.&quot;, e, this.value, value); //$NON-NLS-1$&#xA;}&#xA;&#xA;return result;"/>
      </eAnnotations>
      <eParameters name="value" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"/>
    </eOperations>
    <eOperations name="addedTo" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="String result = null;&#xA;&#xA;// Checks the metric of the parameter to know how to compare.&#xA;try {&#xA;&#x9;switch (metric) {&#xA;&#x9;// FIXME: implement enumerated parameters.&#xA;&#x9;case ENUMERATED:&#xA;&#x9;&#x9;break;&#xA;&#x9;&#x9;&#xA;&#x9;// If the parameter is numeric, parses it and add as numbers.&#xA;&#x9;case INTEGER:&#xA;&#x9;case REAL:&#xA;&#x9;&#x9;java.math.BigDecimal a = new java.math.BigDecimal(this.value);&#xA;&#x9;&#x9;java.math.BigDecimal b = new java.math.BigDecimal(value);&#xA;&#x9;&#x9;return a.add(b).toPlainString();&#xA;&#x9;}&#xA;}&#xA;&#xA;// In case there are parsing errors (badly formatted numbers in the model), logs an error and returns null.&#xA;catch (NumberFormatException e) {&#xA;&#x9;it.unitn.disi.zanshin.core.CoreUtils.log.error(&quot;Error during string->number conversion, either the parameter value ({0}) or the value to compare ({1}) are not numbers.&quot;, e, this.value, value); //$NON-NLS-1$&#xA;}&#xA;&#xA;return result;"/>
      </eAnnotations>
      <eParameters name="value" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"/>
    </eOperations>
    <eOperations name="multipliedBy" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="String result = null;&#xA;&#xA;// Checks the metric of the parameter to know how to compare.&#xA;try {&#xA;&#x9;switch (metric) {&#xA;&#x9;// FIXME: implement enumerated parameters.&#xA;&#x9;case ENUMERATED:&#xA;&#x9;&#x9;break;&#xA;&#x9;&#x9;&#xA;&#x9;// If the parameter is numeric, parses it and multiply as numbers.&#xA;&#x9;case INTEGER:&#xA;&#x9;case REAL:&#xA;&#x9;&#x9;java.math.BigDecimal a = new java.math.BigDecimal(this.value);&#xA;&#x9;&#x9;java.math.BigDecimal b = new java.math.BigDecimal(value);&#xA;&#x9;&#x9;return a.multiply(b).toPlainString();&#xA;&#x9;}&#xA;}&#xA;&#xA;// In case there are parsing errors (badly formatted numbers in the model), logs an error and returns null.&#xA;catch (NumberFormatException e) {&#xA;&#x9;it.unitn.disi.zanshin.core.CoreUtils.log.error(&quot;Error during string->number conversion, either the parameter value ({0}) or the value to compare ({1}) are not numbers.&quot;, e, this.value, value); //$NON-NLS-1$&#xA;}&#xA;&#xA;return result;"/>
      </eAnnotations>
      <eParameters name="value" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"/>
    </eOperations>
    <eOperations name="subtractedFrom" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="String result = null;&#xA;&#xA;// Checks the metric of the parameter to know how to compare.&#xA;try {&#xA;&#x9;switch (metric) {&#xA;&#x9;// FIXME: implement enumerated parameters.&#xA;&#x9;case ENUMERATED:&#xA;&#x9;&#x9;break;&#xA;&#x9;&#x9;&#xA;&#x9;// If the parameter is numeric, parses it and add as numbers.&#xA;&#x9;case INTEGER:&#xA;&#x9;case REAL:&#xA;&#x9;&#x9;java.math.BigDecimal a = new java.math.BigDecimal(this.value);&#xA;&#x9;&#x9;java.math.BigDecimal b = new java.math.BigDecimal(value);&#xA;&#x9;&#x9;return a.subtract(b).toPlainString();&#xA;&#x9;}&#xA;}&#xA;&#xA;// In case there are parsing errors (badly formatted numbers in the model), logs an error and returns null.&#xA;catch (NumberFormatException e) {&#xA;&#x9;it.unitn.disi.zanshin.core.CoreUtils.log.error(&quot;Error during string->number conversion, either the parameter value ({0}) or the value to compare ({1}) are not numbers.&quot;, e, this.value, value); //$NON-NLS-1$&#xA;}&#xA;&#xA;return result;"/>
      </eAnnotations>
      <eParameters name="value" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"/>
    </eOperations>
    <eOperations name="withinBoundsOf" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EBooleanObject">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="String lowerBound = relation.getLowerBound();&#xA;String upperBound = relation.getUpperBound();&#xA;&#xA;// Checks for null comparisons.&#xA;Boolean lowerCmp = greaterThan(lowerBound);&#xA;Boolean upperCmp = fewerThan(upperBound);&#xA;if ((lowerBound != null) &amp;&amp; (lowerCmp == null)) return null;&#xA;if ((upperBound != null) &amp;&amp; (upperCmp == null)) return null;&#xA;&#xA;// Does the comparisons, but only if needed. When the bounds are null, they mean infinity.&#xA;return (((lowerBound == null) || lowerCmp) &amp;&amp; ((upperBound == null) || upperCmp));"/>
      </eAnnotations>
      <eParameters name="relation" eType="#//DifferentialRelation"/>
    </eOperations>
    <eOperations name="incrementableIn" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EBooleanObject">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="// Creates a fake parameter and increments it by a unit.&#xA;Parameter param = createCopy();&#xA;param.increment(relation, unit);&#xA;&#xA;// Checks if the fake param, i.e., the param incremented by a unit, is still within boundaries.&#xA;return param.withinBoundsOf(relation);"/>
      </eAnnotations>
      <eParameters name="relation" eType="#//DifferentialRelation"/>
    </eOperations>
    <eOperations name="createCopy" eType="#//Parameter">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="org.eclipse.emf.ecore.util.EcoreUtil.Copier copier = new org.eclipse.emf.ecore.util.EcoreUtil.Copier();&#xA;Parameter copy = (Parameter) copier.copy(this);&#xA;return copy;"/>
      </eAnnotations>
    </eOperations>
    <eOperations name="increment">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="body" value="// Obtains the operator from the differential relation to check the increment direction.&#xA;String newValue = null;&#xA;switch (relation.getOperator()) {&#xA;case FEWER_THAN:&#xA;&#x9;newValue = subtractedFrom(value);&#xA;&#x9;break;&#xA;case GREATER_THAN:&#xA;&#x9;newValue = addedTo(value);&#xA;&#x9;break;&#xA;}&#xA;&#xA;// Changes the parameter's value to the new value.&#xA;if (newValue != null)&#xA;&#x9;setValue(newValue);"/>
      </eAnnotations>
      <eParameters name="relation" eType="#//DifferentialRelation"/>
      <eParameters name="value" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"/>
    </eOperations>
    <eStructuralFeatures xsi:type="ecore:EReference" name="configuration" eType="#//Configuration"
        eOpposite="#//Configuration/parameters"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="type" lowerBound="1" eType="#//ParameterType"
        defaultValueLiteral="vp"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="unit" lowerBound="1" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="value" lowerBound="1" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="metric" lowerBound="1"
        eType="#//ParameterMetric" defaultValueLiteral="enumerated"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="internalID" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EIntegerObject"
        defaultValueLiteral="0" iD="true"/>
  </eClassifiers>
</ecore:EPackage>
